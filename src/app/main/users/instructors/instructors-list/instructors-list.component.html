<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <!-- Instructors List -->
    <section class="admins-list-wrapper">

      <!-- Card Header -->
      <div *ngIf="hasHeader" class="card">
        <h5 class="card-header">{{ 'INSTRUCTORS_LIST' | translate }}</h5>
      </div>

      <!-- Loading Spinner -->
      <div *ngIf="isLoading" class="spinner-grow" role="status">
        <span class="sr-only">{{ 'LOADING' | translate }}</span>
      </div>

      <!-- Main Card -->
      <div *ngIf="!isLoading" class="card p-2">
        
        <!-- Top Controls -->
        <div class="d-flex flex-wrap align-items-center justify-content-between mb-2">

          <!-- Show Entries -->
          <div class="d-flex align-items-center mb-1 mb-md-0">
            <label class="d-flex align-items-center mb-0">
              {{ "SHOW" | translate }}
              <select class="form-control form-control-sm mx-2" [(ngModel)]="selectedOption">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
              {{ "ENTRIES" | translate }}
            </label>
          </div>

          <!-- Search + Add New -->
          <div class="d-flex align-items-center">
            <label class="d-flex align-items-center mb-0 mr-2">{{ "SEARCH" | translate }}:</label>
            <input [(ngModel)]="searchValue" 
                   name="searchValue" 
                   type="search" 
                   class="form-control form-control-sm mr-2" 
                   style="max-width: 200px"
                   (keyup)="filterUpdate($event)" 
                   (search)="filterUpdate($event)" />
            
            <!-- Add New Button -->
            <button *ngIf="_permissionListService.hasPermission('Instructors','add_instructor') && hasActions"
                    class="btn btn-primary m-2 col-4"
                    (click)="addItem()">
              {{ "ADD_NEW" | translate }}
            </button>
          </div>
        </div>

        <!-- View Table -->
        <ngx-datatable
          [rows]="rows"
          [rowHeight]="50"
          class="bootstrap core-bootstrap no-padding-table"
          [limit]="selectedOption"
          [columnMode]="ColumnMode.force"
          [headerHeight]="50"
          [footerHeight]="50"
          [scrollbarH]="true">

          <!-- ID -->
          <ngx-datatable-column name="#" prop="id" [width]="50">
            <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
              <div class="d-flex align-items-center">
                {{ row.id }}
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Image -->
          <ngx-datatable-column name="{{ 'IMAGE' | translate }}" prop="imageUrl" [width]="50">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="d-flex align-items-center">
                <img class="rounded-circle mr-1" src="{{ row.user.image }}" height="32" width="32" alt="avatar" />
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Name -->
          <ngx-datatable-column name="{{ 'NAME' | translate }}" prop="name">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="d-flex align-items-center">
                {{ row.user.firstName }} {{ row.user.lastName }}
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Phone -->
          <ngx-datatable-column name="{{ 'PHONE_NUMBER' | translate }}" prop="phoneNumber">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="d-flex align-items-center">
                {{ row.user.phone }}
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Educational Portal -->
          <ngx-datatable-column name="{{ 'EDUCATIONAL_PORTAL' | translate }}" prop="educationalPortal">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="badge badge-primary">
                {{ (this.locale === 'en') ? row.educationalportal?.nameEn : row.educationalportal?.nameAr }}
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Subject -->
          <ngx-datatable-column name="{{ 'EDUCATIONAL_SUBJECT' | translate }}" prop="subject">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="d-flex align-items-center">
                {{ (this.locale === 'en') ? row.subject?.nameEn : row.subject?.nameAr }}
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Status -->
          <ngx-datatable-column name="{{ 'STATUS' | translate }}" prop="status">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div *ngIf="row.user.accountStatus == 1" class="badge badge-light-danger">
                {{ 'DISABLED' | translate }}
              </div>
              <div *ngIf="row.user.accountStatus == 2" class="badge badge-light-primary">
                {{ 'APPROVED' | translate }}
              </div>
              <div *ngIf="row.user.accountStatus == 3" class="badge badge-light-danger">
                {{ 'BLOCKED' | translate }}
              </div>
            </ng-template>
          </ngx-datatable-column>

          <!-- Actions -->
          <ngx-datatable-column *ngIf="hasActions" name="{{ 'ACTIONS' | translate }}" [sortable]="false" [width]="180">
            <ng-template ngx-datatable-cell-template let-row="row">
              <div class="row">
                <button *ngIf="_permissionListService.hasPermission('Instructors','view_instructor')"
                        (click)="editItem(row)" class="btn btn-flat-secondary btn-sm" rippleEffect>
                  <span [data-feather]="'eye'"></span>
                </button>
                <button *ngIf="_permissionListService.hasPermission('Instructors','edit_instructor')"
                        (click)="editItem(row)" class="btn btn-flat-secondary btn-sm" rippleEffect>
                  <span [data-feather]="'edit'"></span>
                </button>
                <button *ngIf="_permissionListService.hasPermission('Instructors','delete_instructor')"
                        (click)="ConfirmDelete(row.userId)" class="btn btn-flat-danger btn-sm" rippleEffect>
                  <span [data-feather]="'trash'"></span>
                </button>
              </div>
            </ng-template>
          </ngx-datatable-column>

        </ngx-datatable>
      </div>
    </section>
  </div>
</div>
