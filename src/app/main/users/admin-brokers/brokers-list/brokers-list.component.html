<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <section class="admins-list-wrapper">

      <div *ngIf="hasHeader" class="card">
        <h5 class="card-header">{{ 'BROKERS_LIST' | translate }}</h5>
      </div>

      <div *ngIf="isLoading" class="spinner-grow" role="status">
        <span class="sr-only">{{ 'LOADING' | translate }}</span>
      </div>

      <div *ngIf="!isLoading" class="card p-2">
        
        <!-- Top Controls -->
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-2">

          <!-- Show Entries -->
          <div class="d-flex align-items-center">
            <label class="mb-0 d-flex align-items-center">
              {{ "SHOW" | translate }}
              <select class="form-control form-control-sm mx-2" [(ngModel)]="selectedOption">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
              {{ "ENTRIES" | translate }}
            </label>
          </div>

          <!-- Search + Add New -->
          <div class="d-flex align-items-center">
            <label class="mb-0 mr-2">{{ "SEARCH" | translate }}:</label>
            <input [(ngModel)]="searchValue"
                   type="search"
                   class="form-control form-control-sm mr-2"
                   style="max-width:200px"
                   (keyup)="filterUpdate($event)"
                   (search)="filterUpdate($event)" />

            <button 
                    class="btn btn-primary m-2 col-4"
                    (click)="addItem()">
              {{ "ADD_NEW" | translate }}
            </button>
          </div>
        </div>

        <!-- Table -->
        <ngx-datatable
  class="bootstrap core-bootstrap no-padding-table"
  [rows]="rows"
  [rowHeight]="50"
  [limit]="selectedOption"
  [columnMode]="ColumnMode.force"
  [headerHeight]="50"
  [footerHeight]="50"
  [scrollbarH]="true">

  <!-- ID -->
  <ngx-datatable-column name="#" prop="id" [width]="50">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.id }}
    </ng-template>
  </ngx-datatable-column>

  <!-- Image -->
  <ngx-datatable-column name="{{ 'IMAGE' | translate }}" prop="image" [width]="50">
    <ng-template let-row="row" ngx-datatable-cell-template>
      <img *ngIf="row.user.image"
           class="rounded-circle"
           [src]="row.user.image"
           height="32"
           width="32"
           alt="avatar"/>
      <span *ngIf="!row.user.image" class="badge badge-light-secondary">N/A</span>
    </ng-template>
  </ngx-datatable-column>

  <!-- Name -->
  <ngx-datatable-column name="{{ 'NAME' | translate }}" prop="name">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.user.firstName }} {{ row.user.lastName }}
    </ng-template>
  </ngx-datatable-column>

  <!-- Phone -->
  <ngx-datatable-column name="{{ 'PHONE_NUMBER' | translate }}">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.user.phone }}
    </ng-template>
  </ngx-datatable-column>

  <!-- Email -->
  <ngx-datatable-column name="{{ 'EMAIL' | translate }}">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.user.email }}
    </ng-template>
  </ngx-datatable-column>

  <!-- Status -->
  <ngx-datatable-column name="{{ 'STATUS' | translate }}" prop="isActive">
    <ng-template let-row="row" ngx-datatable-cell-template>
      <div *ngIf="row.isActive" class="badge badge-light-success">ACTIVE</div>
      <div *ngIf="!row.isActive" class="badge badge-light-danger">INACTIVE</div>
    </ng-template>
  </ngx-datatable-column>

  <!-- Actions -->
  <ngx-datatable-column  name="{{ 'ACTIONS' | translate }}" [sortable]="false" [width]="150">
            <ng-template ngx-datatable-cell-template let-row="row">
              <button 
                      (click)="editItem(row)"
                      class="btn btn-sm btn-flat-secondary mr-1" rippleEffect>
                <i class="fas fa-eye"></i>
              </button>
              <button 
                      (click)="editItem(row)"
                      class="btn btn-sm btn-flat-secondary mr-1" rippleEffect>
                <i class="fas fa-edit"></i>
              </button>
              <button 
                      (click)="deleteItem(row.userId)"
                      class="btn btn-sm btn-flat-danger" rippleEffect>
                <i class="fas fa-trash"></i>
              </button>
            </ng-template>
          </ngx-datatable-column>

</ngx-datatable>

      </div>
    </section>
  </div>
</div>
