<div class="content-wrapper container-xxl p-0">

    <!-- Card Header -->
    <div class="card">
        <h5 class="card-header">{{ 'ORGANIZATIONS_LIST' | translate }}</h5>
    </div>

    <div class="content-body">

        <!-- Organization List -->
        <section class="organizations-list-wrapper">

            <!-- Loading Spinner -->
            <div *ngIf="isLoading" class="spinner-grow" role="status">
                <span class="sr-only">{{ 'LOADING' | translate }}</span>
            </div>

            <!-- Statistics -->
            <div class="card card-statistics">
                <div class="card-body statistics-body">
                    <div class="row">

                        <!-- All Organization -->
                        <div class="col-md-4 col-sm-6 col-12 mb-2 mb-sm-0">
                            <div class="media">
                                <div class="avatar bg-light-info mr-2">
                                    <div class="avatar-content">
                                        <i data-feather="codesandbox" class="avatar-icon"></i>
                                    </div>
                                </div>
                                <div class="media-body my-auto">
                                    <h4 class="font-weight-bolder mb-0">{{allCenters.length}}</h4>
                                    <p class="card-text font-small-3 mb-0">{{ 'ALL_ORGANIZATIONS' | translate }}</p>
                                </div>
                            </div>
                        </div>

                        <!-- Approved Organization -->
                        <div class="col-md-4 col-sm-6 col-12 mb-2 mb-md-0">
                            <div class="media">
                                <div class="avatar bg-light-success mr-2">
                                    <div class="avatar-content">
                                        <i data-feather="thumbs-up" class="avatar-icon"></i>
                                    </div>
                                </div>
                                <div class="media-body my-auto">
                                    <h4 class="font-weight-bolder mb-0">
                                        {{ activeCenters }}
                                    </h4>
                                    <p class="card-text font-small-3 mb-0">{{ 'APPROVED_ORGANIZATIONS' | translate }}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Inactive Organization -->
                        <div class="col-md-4 col-sm-6 col-12">
                            <div class="media">
                                <div class="avatar bg-light-danger mr-2">
                                    <div class="avatar-content">
                                        <i data-feather="alert-octagon" class="avatar-icon"></i>
                                    </div>
                                </div>
                                <div class="media-body my-auto">
                                    <h4 class="font-weight-bolder mb-0">{{ allCenters.length - activeCenters }}
                                    </h4>
                                    <p class="card-text font-small-3 mb-0">{{ 'INACTIVE_ORGANIZATIONS' | translate }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Card -->
            <div *ngIf="!isLoading" class="card">
                <div class="row p-2">
                    <!-- Show Entries -->
                    <div class="col-md-6 col-12">
                        <div class="d-flex justify-content-between align-items-center m-1">
                            <label class="d-flex align-items-center">{{ 'SHOW' | translate }}
                                <select class="form-control mx-25" [(ngModel)]="selectedOption">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                                {{ 'ENTRIES' | translate }}
                            </label>
                        </div>
                    </div>

                    <!-- Search Input -->
                    <div class="col-md-6 col-12 d-flex justify-content-start justify-content-md-end">
                        <div class="d-flex align-items-center justify-content-end">
                            <label class="d-flex align-items-center m-2 ml-md-0">{{ 'SEARCH' | translate }}:</label>
                            <input [(ngModel)]="searchValue" name="searchValue" type="search" class="form-control"
                                (keyup)="filterUpdate($event)" (search)="filterUpdate($event)" />
                            <!-- Add New Button -->
                            <button *ngIf="_permissionListService.hasPermission('Organization', 'add_organization')"
                                class="btn btn-primary m-2 col-4" rippleEffect (click)="addItem()">
                                {{ 'ADD_NEW' | translate }}
                            </button>
                        </div>
                    </div>
                </div>

                <!-- View Table -->
                <ngx-datatable [rows]="rows" [rowHeight]="80" class="bootstrap core-bootstrap" [limit]="selectedOption"
                    [columnMode]="ColumnMode.force" [headerHeight]="50" [footerHeight]="50" [scrollbarH]="true">

                    <!-- ID Column -->
                    <ngx-datatable-column name="#" prop="id" [width]="10">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="d-flex align-items-center">{{ row.id }}</div>
                        </ng-template>
                    </ngx-datatable-column>

                    <!-- Image Column -->
                    <ngx-datatable-column name="{{ 'IMAGE' | translate }}" prop="imageUrl">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="d-flex align-items-center">
                                <img class="rounded mr-1" [src]="row.user.image" height="60" width="80"
                                    alt="datatable-avatar" />
                            </div>
                        </ng-template>
                    </ngx-datatable-column>

                    <!-- Name Column -->
                    <ngx-datatable-column name="{{ 'NAME' | translate }}" prop="name">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="d-flex align-items-center">{{ row.user.firstName }} {{ row.user.lastName }}
                            </div>
                        </ng-template>
                    </ngx-datatable-column>

                    <!-- Email Column -->
                    <ngx-datatable-column name="{{ 'EMAIL' | translate }}" prop="name">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="d-flex align-items-center">{{ row.user.email }}</div>
                        </ng-template>
                    </ngx-datatable-column>

                    <!-- Status Column -->
                    <ngx-datatable-column name="{{ 'STATUS' | translate }}" prop="status">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <div *ngIf="row.user.accountStatus == 1" class="badge badge-light-danger">{{ 'DISABLED' |
                                translate }}</div>
                            <div *ngIf="row.user.accountStatus == 2" class="badge badge-light-primary">{{ 'APPROVED' |
                                translate }}</div>
                            <div *ngIf="row.user.accountStatus == 3" class="badge badge-light-danger">{{ 'BLOCKED' |
                                translate }}</div>
                        </ng-template>
                    </ngx-datatable-column>

                    <!-- Actions Column -->
                    <ngx-datatable-column name="{{ 'ACTIONS' | translate }}" [sortable]="false">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="row">
                                <!-- View Action -->
                                <button
                                    *ngIf="_permissionListService.hasPermission('Organization', 'view_organization')"
                                    (click)="viewItem(row)" class="btn btn-flat-secondary" rippleEffect>
                                    <span [data-feather]="'eye'"></span>
                                </button>

                                <!-- Edit Action -->
                                <button
                                    *ngIf="_permissionListService.hasPermission('Organization', 'edit_organization')"
                                    (click)="editItem(row)" class="btn btn-flat-secondary" rippleEffect>
                                    <span [data-feather]="'edit'"></span>
                                </button>

                                <!-- Delete Action -->
                                <button
                                    *ngIf="_permissionListService.hasPermission('Organization', 'delete_organization')"
                                    class="btn btn-flat-danger" rippleEffect (click)="ConfirmDelete(row.userId)">
                                    <span [data-feather]="'trash'"></span>
                                </button>
                            </div>
                        </ng-template>
                    </ngx-datatable-column>

                </ngx-datatable>
            </div>
        </section>
        <!-- Organization List -->
    </div>
</div>