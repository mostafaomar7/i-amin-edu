<!-- Screen Header -->
<div class="card">
  <h5 class="card-header">{{ 'ADD_ROLE' | translate }}</h5>
</div>
<!-- Screen Header -->

<div *ngIf="isLoading" class="spinner-grow" role="status">
  <span class="sr-only">{{ 'LOADING' | translate }}</span>
</div>

<div class="container">
  <form *ngIf="!isLoading" [formGroup]="permissionForm" (ngSubmit)="onSubmit()">

    <div class="row">

      <!-- Role Name -->
      <div class="form-group col-md-6 col-12">
        <label for="roleName">{{ 'ROLE_NAME' | translate }}</label>
        <input type="text" id="roleName" class="form-control" formControlName="roleName" required />
        <small *ngIf="permissionForm.get('roleName').hasError('required') && permissionForm.get('roleName').touched"
          class="form-text text-danger">
          {{ 'REQUIRED_FIELD' | translate }}
        </small>
      </div>

      <!-- Permissions Section -->
      <div class="col-12">
        <div class="form-group">
          <div class="row" *ngFor="let permission of permissionForm.get('permissionFormArray').value;">
            <div class="col-12 mb-4">
              <h4>{{ permission.name }}</h4>
              <div class="row mt-3 ml-1 mb-4">
                <div class="custom-control custom-checkbox col-md-2 col-6"
                  *ngFor="let action of permission.permissions; let i = index">
                  <input class="custom-control-input" type="checkbox" id="{{ action.name }}"
                    (change)="onChangePermission(action, $event.target.checked)" [checked]="action.selected" />
                  <label class="custom-control-label" for="{{ action.name }}">
                    {{ action.name }}
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="col-12">
        <button type="submit" rippleEffect class="btn btn-primary mr-1" [disabled]="!permissionForm.valid">
          {{ 'SUBMIT' | translate }}
        </button>
        <button type="button" rippleEffect class="btn btn-outline-secondary" (click)="back()">
          {{ 'CANCEL' | translate }}
        </button>
      </div>
    </div>
  </form>
</div>